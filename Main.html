<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', 'Inter', sans-serif; scroll-behavior: smooth; }
        .star-rating { direction: ltr; display: inline-flex; }
        .star-rating input { display: none; }
        .star-rating label { font-size: 2.5rem; color: #d1d5db; cursor: pointer; transition: 0.2s; }
        .star-rating input:checked ~ label, .star-rating label:hover, .star-rating label:hover ~ label { color: #f59e0b; }
        .admin-panel { display: none; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-blue-600" id="nav-title">...</h1>
            <div class="flex gap-3">
                <button onclick="toggleLang()" class="text-sm font-semibold hover:text-blue-600 transition">English / Ø¹Ø±Ø¨ÙŠ</button>
                <button onclick="loginAdmin()" class="bg-gray-100 text-gray-600 px-3 py-1 rounded-md text-sm">ğŸ”’ Ø§Ù„Ù…Ø­Ø±Ø±</button>
            </div>
        </div>
    </nav>

    <div id="admin-tools" class="admin-panel bg-slate-800 text-white p-6">
        <div class="container mx-auto">
            <h2 class="text-xl font-bold mb-4 border-b border-slate-700 pb-2">ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙ‚Ø·)</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs mb-1">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹:</label>
                    <input type="text" id="edit-nav" class="w-full p-2 rounded text-black mb-3">
                    <label class="block text-xs mb-1">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø­Ø«:</label>
                    <input type="text" id="edit-title" class="w-full p-2 rounded text-black">
                </div>
                <div>
                    <label class="block text-xs mb-1">Ø§Ù„Ù…Ù„Ø®Øµ:</label>
                    <textarea id="edit-summary" class="w-full p-2 rounded text-black mb-3" rows="2"></textarea>
                    <label class="block text-xs mb-1">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØ§Ù…Ù„:</label>
                    <textarea id="edit-content" class="w-full p-2 rounded text-black" rows="5"></textarea>
                </div>
            </div>
            <div class="mt-4 flex gap-4">
                <button onclick="saveChanges()" class="bg-green-500 px-6 py-2 rounded-lg font-bold">Ø­ÙØ¸ Ù…Ø¤Ù‚Øª</button>
                <button onclick="exportJSON()" class="bg-blue-500 px-6 py-2 rounded-lg font-bold">ØªØµØ¯ÙŠØ± Ù…Ù„Ù data.json Ø§Ù„Ø¬Ø¯ÙŠØ¯ ğŸ“¥</button>
                <button onclick="logout()" class="bg-red-500 px-4 py-2 rounded-lg">Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <header class="py-16 bg-white border-b">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl md:text-5xl font-extrabold mb-6" id="view-title">...</h2>
            <p class="text-gray-500 max-w-2xl mx-auto text-lg leading-relaxed" id="view-summary">...</p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
            <article id="view-content" class="bg-white p-8 md:p-12 rounded-2xl shadow-sm border border-gray-100 leading-loose text-lg whitespace-pre-wrap">
                ...
            </article>

            <section class="mt-20 bg-blue-600 rounded-3xl p-10 text-white shadow-xl">
                <div class="max-w-xl mx-auto text-center">
                    <h3 class="text-3xl font-bold mb-4" id="rate-head">Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«ØŸ</h3>
                    <p class="mb-8 opacity-90" id="rate-sub">ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙŠØ³Ø§Ø¹Ø¯Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
                    
                    <form id="ratingForm" class="space-y-6">
                        <div class="star-rating">
                            <input type="radio" name="stars" id="star5" value="5"><label for="star5">â˜…</label>
                            <input type="radio" name="stars" id="star4" value="4"><label for="star4">â˜…</label>
                            <input type="radio" name="stars" id="star3" value="3"><label for="star3">â˜…</label>
                            <input type="radio" name="stars" id="star2" value="2"><label for="star2">â˜…</label>
                            <input type="radio" name="stars" id="star1" value="1"><label for="star1">â˜…</label>
                        </div>
                        <textarea id="reason" class="w-full p-4 rounded-xl text-gray-900 outline-none focus:ring-4 focus:ring-blue-300" placeholder="..." rows="3"></textarea>
                        <button type="button" onclick="sendRating()" class="bg-white text-blue-600 font-bold px-10 py-3 rounded-full hover:scale-105 transition transform" id="btn-send">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
                    </form>
                </div>
            </section>
        </div>
    </main>

    <script>
        let db = {};
        let lang = 'ar';

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function loadData() {
            try {
                const res = await fetch('data.json');
                db = await res.json();
                render();
            } catch (e) { console.error("ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù data.json Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„ØµÙØ­Ø©"); }
        }

        function render() {
            const d = db[lang];
            const isAr = lang === 'ar';
            document.documentElement.dir = isAr ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('nav-title').innerText = d.navTitle;
            document.getElementById('view-title').innerText = d.title;
            document.getElementById('view-summary').innerText = d.summary;
            document.getElementById('view-content').innerText = d.content;

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø³Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
            document.getElementById('rate-head').innerText = isAr ? "Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«ØŸ" : "What's your feedback?";
            document.getElementById('rate-sub').innerText = isAr ? "ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙŠØ³Ø§Ø¹Ø¯Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ·ÙˆÙŠØ±" : "Your rating helps me improve";
            document.getElementById('reason').placeholder = isAr ? "Ø³Ø¨Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)..." : "Reason for rating (Optional)...";
            document.getElementById('btn-send').innerText = isAr ? "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…" : "Submit Rating";

            // ØªØ¹Ø¨Ø¦Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
            document.getElementById('edit-nav').value = d.navTitle;
            document.getElementById('edit-title').value = d.title;
            document.getElementById('edit-summary').value = d.summary;
            document.getElementById('edit-content').value = d.content;
        }

        function toggleLang() { lang = lang === 'ar' ? 'en' : 'ar'; render(); }

        function loginAdmin() {
            if(prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:") === "1234") {
                document.getElementById('admin-tools').style.display = 'block';
            }
        }

        function saveChanges() {
            db[lang] = {
                navTitle: document.getElementById('edit-nav').value,
                title: document.getElementById('edit-title').value,
                summary: document.getElementById('edit-summary').value,
                content: document.getElementById('edit-content').value
            };
            render();
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø¤Ù‚ØªØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­!");
        }

        function exportJSON() {
            const blob = new Blob([JSON.stringify(db, null, 2)], {type : 'application/json'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'data.json';
            a.click();
        }

        function logout() { document.getElementById('admin-tools').style.display = 'none'; }

        function sendRating() {
            const stars = document.querySelector('input[name="stars"]:checked')?.value;
            if(!stars) return alert(lang === 'ar' ? "Ø§Ø®ØªØ± Ø§Ù„Ù†Ø¬ÙˆÙ… Ø£ÙˆÙ„Ø§Ù‹!" : "Select stars first!");
            alert(lang === 'ar' ? "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­." : "Thank you! Rating received.");
            document.getElementById('ratingForm').reset();
        }

        window.onload = loadData;
    </script>
</body>
</html>
